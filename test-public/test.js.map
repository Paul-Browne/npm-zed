{"version":3,"file":"test.js","sources":["../index.js","../test/test.js"],"sourcesContent":["export default function Z(obj) {\n  Z[obj.id] = obj;\n}\n\nZ.xhr = function (obj, arr, i, cb, ls, xhr, id) {\n  arr = arr || [];\n  ls = obj.local && obj.local();\n  if(ls){\n    arr[i||0] = obj.callback ? obj.callback(ls) : ls;\n    cb && !~arr.indexOf(undefined) && cb(arr);\n  }else{\n    xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == 4) {\n        arr[i || 0] = xhr.status == (obj.status || 200) ? obj.callback ? obj.callback(xhr.responseText) : xhr.responseText : null;\n        cb && !~arr.indexOf(undefined) && cb(arr);\n      }\n    };\n    xhr.open(obj.method || \"GET\", obj.url, true);\n    for (id in obj.headers) {\n      xhr.setRequestHeader(id, obj.headers[id]);\n    }\n    xhr.send(obj.body);\n  }\n};\n\nZ.xhrs = function (arr, callback, arrResolved, i) {\n  arrResolved = arr.map(function(){});\n  for (i in arr){\n    Z.xhr(arr[i], arrResolved, i, callback);\n  }\n};","import Z from \"../index.js\";\n\nwindow.addEventListener(\"hashchange\", function (e) {\n  Z.header.update(window.location.hash);\n  Z.update(\"counter\");\n  Z.update(\"list\");\n  Z.update(\"person\");\n});\n\nZ.mount({\n  id: \"body\",\n  render: () => {\n    document.querySelector(\"body\").innerHTML = `\n      <header></header>\n      <main></main>\n      <footer></footer>\n    `;\n  },\n});\n\nZ.mount({\n  id: \"header\",\n  render: (state) => {\n    document.querySelector(\"header\").innerHTML = `\n      <nav>\n        <a class='${\n          state.active === \"#counter\" ? \"active\" : \"\"\n        }' href=\"#counter\">counter</a>\n        <a class='${\n          state.active === \"#list\" ? \"active\" : \"\"\n        }' href=\"#list\">list</a>\n        <a class='${\n          state.active === \"#person\" ? \"active\" : \"\"\n        }' href=\"#person\">person</a>\n      </nav>\n    `;\n  },\n  state: {\n    active: null,\n    update: function (hash) {\n      this.active = hash;\n      Z.update(\"header\");\n    },\n  },\n});\n\nZ.mount({\n  id: \"footer\",\n  render: () => {\n    document.querySelector(\"footer\").innerHTML = `\n      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>\n    `;\n  },\n});\n\nZ.mount({\n  id: \"counter\",\n  render: function (state) {\n    if (window.location.hash !== \"#counter\") return;\n    document.querySelector(\"main\").innerHTML = `\n      <br>\n    \t<button onclick=\"Z.counter.change(-1)\">-1</button>\n      <span>${state.count}</span>\n      <button onclick=\"Z.counter.change(1)\">+1</button>\n    `;\n  },\n  state: {\n    count: 0,\n    change: function (number) {\n      this.count += number;\n      Z.update(\"counter\");\n    },\n  },\n});\n\nZ.watch(\"counter\", function (state) {\n  console.log(state);\n});\n\nZ.mount({\n  id: \"list\",\n  render: function (state) {\n    if (window.location.hash !== \"#list\") return;\n    const html = `\n      <br>\n      <input id=\"task\" type=\"text\" placeholder=\"add task\" />\n      <button onclick=Z.list.add()>Add</button>\n      <br>\n      ${state.todos\n        .map(function (todo, index) {\n          return `\n            <div>\n              <span>${todo}</span>\n              <button onclick=\"Z.list.remove(${index})\">remove</button>\n            </div>\n          `;\n        })\n        .join(\"\")}\n      `;\n    document.querySelector(\"main\").innerHTML = html;\n  },\n  state: {\n    todos: [],\n    add: function () {\n      var task = document.getElementById(\"task\");\n      this.todos.push(task.value);\n      Z.update(\"list\");\n      document.getElementById(\"task\").focus();\n    },\n    remove: function (index) {\n      this.todos.splice(index, 1);\n      Z.update(\"list\");\n    },\n  },\n});\n\nZ.load(\n  [\n    {\n      id: \"data\",\n      url: \"data.json\",\n      callback: function (res) {\n        return JSON.parse(res);\n      },\n    },\n  ],\n  function (data) {\n    Z.mount({\n      id: \"person\",\n      render: function (state) {\n        if (window.location.hash !== \"#person\") return;\n        document.querySelector(\n          \"main\"\n        ).innerHTML = `<h1>Hello ${state.name} you are ${state.age} years old!</h1>`;\n      },\n      state: data[0],\n    });\n  }\n);\n"],"names":["Z","obj","id","xhr","arr","i","cb","ls","local","callback","indexOf","undefined","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","method","url","headers","setRequestHeader","send","body","xhrs","arrResolved","map","window","addEventListener","e","header","update","location","hash","mount","render","document","querySelector","innerHTML","state","active","count","change","number","watch","console","log","html","todos","todo","index","join","add","task","getElementById","push","value","focus","remove","splice","load","res","JSON","parse","data","name","age"],"mappings":"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"}