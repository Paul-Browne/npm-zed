{"version":3,"file":"test2.js","sources":["../index.js","../test/test2.js"],"sourcesContent":["export default function Z(obj) {\n  Z[obj.id] = obj;\n}\n\nZ.xhr = function (obj, arr, i, cb, ls, xhr, id) {\n  arr = arr || [];\n  ls = obj.local && obj.local();\n  if(ls){\n    arr[i||0] = obj.callback ? obj.callback(ls) : ls;\n    cb && !~arr.indexOf(undefined) && cb(arr);\n  }else{\n    xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == 4) {\n        arr[i || 0] = xhr.status == (obj.status || 200) ? obj.callback ? obj.callback(xhr.responseText) : xhr.responseText : null;\n        cb && !~arr.indexOf(undefined) && cb(arr);\n      }\n    };\n    xhr.open(obj.method || \"GET\", obj.url, true);\n    for (id in obj.headers) {\n      xhr.setRequestHeader(id, obj.headers[id]);\n    }\n    xhr.send(obj.body);\n  }\n};\n\nZ.xhrs = function (arr, callback, arrResolved, i) {\n  arrResolved = arr.map(function(){});\n  for (i in arr){\n    Z.xhr(arr[i], arrResolved, i, callback);\n  }\n};","import Z from \"../index.js\";\n\nfunction queryLocalstoreById(id) {\n  var timestamp = localStorage.getItem(id + \"-timestamp\");\n  var oneMonthInMilliseconds = 1000 * 60 * 60 * 24 * 30;\n  if (!timestamp || Date.now() - timestamp > oneMonthInMilliseconds) {\n    localStorage.setItem(id + \"-timestamp\", Date.now());\n    return false;\n  }\n  return localStorage.getItem(id);\n}\n\nvar str = \"abcdef\";\nvar requests = [\n  {\n    url: \"https://ewrwerewedcejnvihnvirnv.com\",\n    local: function () {\n      console.log(\"ran local\");\n      return queryLocalstoreById(this.url);\n    },\n    callback: function (res) {\n      console.log(\"ran callback\");\n      localStorage.setItem(this.url, res);\n      return JSON.parse(res);\n    },\n  },\n];\nfor (var j = 0; j < str.length; j++) {\n  for (var k = 0; k < str.length; k++) {\n    requests.push({\n      url: \"https://api.npms.io/v2/package/\" + str[j] + str[k],\n      local: function () {\n        console.log(\"ran local\");\n        return queryLocalstoreById(this.url);\n      },\n      callback: function (res) {\n        console.log(\"ran callback\");\n        localStorage.setItem(this.url, res);\n        return JSON.parse(res);\n      },\n    });\n  }\n}\n\nZ.xhrs(requests, function (res) {\n  console.log(res);\n});\n\nZ.xhr({\n  url: \"https://api.npms.io/v2/package/ab\",\n  local: function () {\n    return queryLocalstoreById(this.url);\n  },\n  callback: function (res) {\n    localStorage.setItem(this.url, res);\n    Z({\n      id: \"body\",\n      render: function () {\n        document.querySelector(this.id).innerHTML = `\n          <h1 id=\"heading\"></h1><br><br>\n          <h1>${this.name}</h1> is <h3>${this.age}</h3> years old!\n          ${\n            this.data\n              ? `\n            <code>${this.data.analyzedAt}</code>\n            <code>${this.data.score.final}</code>\n          `\n              : \"\"\n          }`;\n      },\n      data: JSON.parse(res),\n      name: \"Paul\",\n      age: 38,\n    });\n    Z.body.render();\n  },\n});\n\n// Z.xhrs(requests, function(res){\n//     console.log(res);\n//   }\n// )\n// Z({\n//   id: \"body\",\n//   render: function() {\n//     document.querySelector(this.id).innerHTML = `\n//       <h1 id=\"heading\"></h1><br><br>\n//       <h1>${this.name}</h1> is <h3>${this.age}</h3> years old!\n//       ${this.data ? `\n//         <code>${this.data.analyzedAt}</code>\n//         <code>${this.data.score.final}</code>\n//       `\n//       :\n//       \"\"\n//     }`;\n//   },\n//   name: \"Paul\",\n//   age: 38\n// });\n// Z({\n//   id: \"heading\",\n//   render: function(){\n//     document.querySelector(\"#heading\").innerHTML = this.title;\n//   },\n//   title: \"HELLO!!!\"\n// })\n// Z.xhr({\n//   url: \"https://api.npms.io/v2/package/zedjs\",\n//   callback: function(res){\n//     Z.body.data = JSON.parse(res);\n//     Z.body.render();\n//     Z.heading.render();\n//     console.log(JSON.parse(res));\n//   }\n// })\n"],"names":["Z","obj","id","queryLocalstoreById","timestamp","localStorage","getItem","Date","now","setItem","xhr","arr","i","cb","ls","local","callback","indexOf","undefined","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","method","url","headers","setRequestHeader","send","body","xhrs","arrResolved","map","str","requests","console","log","this","res","JSON","parse","j","length","k","push","render","document","querySelector","innerHTML","name","age","data","analyzedAt","score","final"],"mappings":"yBAAe,SAASA,EAAEC,GACxBD,EAAEC,EAAIC,IAAMD,ECCd,SAASE,EAAoBD,OACvBE,EAAYC,aAAaC,QAAQJ,EAAK,qBAErCE,GAAaG,KAAKC,MAAQJ,EADF,QAE3BC,aAAaI,QAAQP,EAAK,aAAcK,KAAKC,QACtC,GAEFH,aAAaC,QAAQJ,GDL9BF,EAAEU,IAAM,SAAUT,EAAKU,EAAKC,EAAGC,EAAIC,EAAIJ,EAAKR,MAC1CS,EAAMA,GAAO,GACbG,EAAKb,EAAIc,OAASd,EAAIc,QAEpBJ,EAAIC,GAAG,GAAKX,EAAIe,SAAWf,EAAIe,SAASF,GAAMA,EAC9CD,KAAQF,EAAIM,aAAQC,IAAcL,EAAGF,OAClC,KASET,KARLQ,EAAM,IAAIS,gBACNC,mBAAqB,WACD,GAAlBV,EAAIW,aACNV,EAAIC,GAAK,GAAKF,EAAIY,SAAWrB,EAAIqB,QAAU,KAAOrB,EAAIe,SAAWf,EAAIe,SAASN,EAAIa,cAAgBb,EAAIa,aAAe,KACrHV,KAAQF,EAAIM,aAAQC,IAAcL,EAAGF,KAGzCD,EAAIc,KAAKvB,EAAIwB,QAAU,MAAOxB,EAAIyB,KAAK,GAC5BzB,EAAI0B,QACbjB,EAAIkB,iBAAiB1B,EAAID,EAAI0B,QAAQzB,IAEvCQ,EAAImB,KAAK5B,EAAI6B,QAIjB9B,EAAE+B,KAAO,SAAUpB,EAAKK,EAAUgB,EAAapB,OAExCA,KADLoB,EAAcrB,EAAIsB,KAAI,eACZtB,EACRX,EAAEU,IAAIC,EAAIC,GAAIoB,EAAapB,EAAGI,ICFlC,IAfA,IAAIkB,EAAM,SACNC,EAAW,CACb,CACET,IAAK,sCACLX,MAAO,kBACLqB,QAAQC,IAAI,aACLlC,EAAoBmC,KAAKZ,MAElCV,SAAU,SAAUuB,UAClBH,QAAQC,IAAI,gBACZhC,aAAaI,QAAQ6B,KAAKZ,IAAKa,GACxBC,KAAKC,MAAMF,MAIfG,EAAI,EAAGA,EAAIR,EAAIS,OAAQD,QACzB,IAAIE,EAAI,EAAGA,EAAIV,EAAIS,OAAQC,IAC9BT,EAASU,KAAK,CACZnB,IAAK,kCAAoCQ,EAAIQ,GAAKR,EAAIU,GACtD7B,MAAO,kBACLqB,QAAQC,IAAI,aACLlC,EAAoBmC,KAAKZ,MAElCV,SAAU,SAAUuB,UAClBH,QAAQC,IAAI,gBACZhC,aAAaI,QAAQ6B,KAAKZ,IAAKa,GACxBC,KAAKC,MAAMF,MAM1BvC,EAAE+B,KAAKI,GAAU,SAAUI,GACzBH,QAAQC,IAAIE,MAGdvC,EAAEU,IAAI,CACJgB,IAAK,oCACLX,MAAO,kBACEZ,EAAoBmC,KAAKZ,MAElCV,SAAU,SAAUuB,GAClBlC,aAAaI,QAAQ6B,KAAKZ,IAAKa,GAC/BvC,EAAE,CACAE,GAAI,OACJ4C,OAAQ,WACNC,SAASC,cAAcV,KAAKpC,IAAI+C,8EAExBX,KAAKY,6BAAoBZ,KAAKa,2CAElCb,KAAKc,mCAEGd,KAAKc,KAAKC,iDACVf,KAAKc,KAAKE,MAAMC,6BAEpB,KAGVH,KAAMZ,KAAKC,MAAMF,GACjBW,KAAM,OACNC,IAAK,KAEPnD,EAAE8B,KAAKgB"}