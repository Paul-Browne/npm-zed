{"version":3,"file":"index.js","sources":["../../index.js","../../src/js/index.js"],"sourcesContent":["export default function Z(obj){\n  Z[obj.id] = obj;\n}\n\nZ.xhr = (obj, arr, i, cb) => {\n  arr = arr || [];\n  var xhr = new XMLHttpRequest();\n  xhr.onreadystatechange = () => {\n    if (xhr.readyState == 4) {\n      arr[i || 0] = xhr.status == (obj.status || 200) ? \n      obj.callback ? \n        obj.callback(xhr.responseText)\n        : xhr.responseText \n      : undefined;\n      cb && !~arr.indexOf(null) && cb(arr);\n    }\n  };\n  xhr.open(obj.method || \"GET\", obj.url, true);\n  for (let id in obj.headers) {\n    xhr.setRequestHeader(id, obj.headers[id]);\n  }\n  xhr.send(obj.body);    \n}\n\nZ.xhrs = (arr, callback) => {\n  const arrResolved = [];\n  arr.forEach((obj, index) => {\n    arrResolved[index] = null;\n  });\n  arr.forEach((obj, index) => {\n    const localStore = obj.local && obj.local();\n    if (localStore) {\n      arrResolved[index] = obj.callback\n        ? obj.callback(localStore)\n        : localStore;\n      callback && !~arrResolved.indexOf(null) && callback(arrResolved);\n    } else {\n      Z.xhr(obj, arrResolved, index, callback);\n    }\n  });\n}","import Z from \"../../index.js\";\n\nwindow.Z = Z;\n\nZ({\n  id: \"body\",\n  render: function () {\n    document.querySelector(this.id).innerHTML = this.data\n      .map((obj, i) => {\n        return `\n    \t<div>\n    \t\t<h1>${obj.collected.metadata.name}</h1>\n    \t\t${\n          obj.collected.metadata.author\n            ? `<h3>${obj.collected.metadata.author.name}</h3>`\n            : \"\"\n        }\n    \t\t<p>${obj.collected.metadata.description}</p>\n    \t</div>\n    \t`;\n      })\n      .join(\"\");\n  },\n});\n\nfunction queryLocalstoreById(id) {\n  var timestamp = localStorage.getItem(id + \"-timestamp\");\n  var oneMonthInMilliseconds = 1000 * 60 * 60 * 24 * 30;\n  if (!timestamp || Date.now() - timestamp > oneMonthInMilliseconds) {\n    localStorage.setItem(id + \"-timestamp\", Date.now());\n    return false;\n  }\n  return localStorage.getItem(id);\n}\n\nvar frameworks = [\"react\", \"angular\", \"zedjs\"];\nvar requests = [];\nframeworks.forEach((name) => {\n  requests.push({\n    url: \"https://api.npms.io/v2/package/\" + name,\n    local: function () {\n      return queryLocalstoreById(this.url);\n    },\n    callback: function (res) {\n      localStorage.setItem(this.url, res);\n      return JSON.parse(res);\n    },\n  });\n});\n\nZ.xhrs(requests, function (res) {\n  Z.body.data = res;\n  Z.body.render();\n});\n\n// Z.xhr({\n//   url: \"https://api.npms.io/v2/package/zedjs\",\n//   callback: function (res) {\n//     Z.body.data = JSON.parse(res);\n//     Z.body.render();\n//   },\n// });\n"],"names":["Z","obj","id","xhr","arr","i","cb","XMLHttpRequest","onreadystatechange","readyState","status","callback","responseText","undefined","indexOf","open","method","url","headers","setRequestHeader","send","body","xhrs","arrResolved","forEach","index","localStore","local","window","render","document","querySelector","this","innerHTML","data","map","collected","metadata","name","author","description","join","requests","push","timestamp","localStorage","getItem","Date","now","setItem","res","JSON","parse"],"mappings":"yBAAe,SAASA,EAAEC,GACxBD,EAAEC,EAAIC,IAAMD,EAGdD,EAAEG,IAAM,SAACF,EAAKG,EAAKC,EAAGC,GACpBF,EAAMA,GAAO,OACTD,EAAM,IAAII,mBAYT,IAAIL,KAXTC,EAAIK,mBAAqB,WACD,GAAlBL,EAAIM,aACNL,EAAIC,GAAK,GAAKF,EAAIO,SAAWT,EAAIS,QAAU,KAC3CT,EAAIU,SACFV,EAAIU,SAASR,EAAIS,cACfT,EAAIS,kBACNC,EACFP,KAAQF,EAAIU,QAAQ,OAASR,EAAGF,KAGpCD,EAAIY,KAAKd,EAAIe,QAAU,MAAOf,EAAIgB,KAAK,GACxBhB,EAAIiB,QACjBf,EAAIgB,iBAAiBjB,EAAID,EAAIiB,QAAQhB,IAEvCC,EAAIiB,KAAKnB,EAAIoB,OAGfrB,EAAEsB,KAAO,SAAClB,EAAKO,OACPY,EAAc,GACpBnB,EAAIoB,SAAQ,SAACvB,EAAKwB,GAChBF,EAAYE,GAAS,QAEvBrB,EAAIoB,SAAQ,SAACvB,EAAKwB,OACVC,EAAazB,EAAI0B,OAAS1B,EAAI0B,QAChCD,GACFH,EAAYE,GAASxB,EAAIU,SACrBV,EAAIU,SAASe,GACbA,EACJf,KAAcY,EAAYT,QAAQ,OAASH,EAASY,IAEpDvB,EAAEG,IAAIF,EAAKsB,EAAaE,EAAOd,OCnCrCiB,OAAO5B,EAAIA,EAEXA,EAAE,CACAE,GAAI,OACJ2B,OAAQ,WACNC,SAASC,cAAcC,KAAK9B,IAAI+B,UAAYD,KAAKE,KAC9CC,KAAI,SAAClC,EAAKI,8CAGLJ,EAAImC,UAAUC,SAASC,+BAEzBrC,EAAImC,UAAUC,SAASE,qBACZtC,EAAImC,UAAUC,SAASE,OAAOD,cACrC,2BAEHrC,EAAImC,UAAUC,SAASG,6CAI3BC,KAAK,OAcZ,IACIC,EAAW,GADE,CAAC,QAAS,UAAW,SAE3BlB,SAAQ,SAACc,GAClBI,EAASC,KAAK,CACZ1B,IAAK,kCAAoCqB,EACzCX,MAAO,kBAfkBzB,EAgBI8B,KAAKf,MAfhC2B,EAAYC,aAAaC,QAAQ5C,EAAK,gBAExB6C,KAAKC,MAAQJ,EADF,QAE3BC,aAAaI,QAAQ/C,EAAK,aAAc6C,KAAKC,QACtC,GAEFH,aAAaC,QAAQ5C,GAP9B,IAA6BA,EACvB0C,GAiBFjC,SAAU,SAAUuC,UAClBL,aAAaI,QAAQjB,KAAKf,IAAKiC,GACxBC,KAAKC,MAAMF,SAKxBlD,EAAEsB,KAAKoB,GAAU,SAAUQ,GACzBlD,EAAEqB,KAAKa,KAAOgB,EACdlD,EAAEqB,KAAKQ"}