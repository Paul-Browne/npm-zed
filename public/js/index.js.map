{"version":3,"file":"index.js","sources":["../../index.js","../../src/js/index.js"],"sourcesContent":["export default function Z(obj) {\n  Z[obj.id] = obj;\n}\n\nZ.xhr = function (obj, arr, i, cb, ls, xhr, id) {\n  arr = arr || [];\n  ls = obj.local && obj.local();\n  if(ls){\n    arr[i||0] = obj.callback ? obj.callback(ls) : ls;\n    cb && !~arr.indexOf(undefined) && cb(arr);\n  }else{\n    xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == 4) {\n        arr[i || 0] = xhr.status == (obj.status || 200) ? obj.callback ? obj.callback(xhr.responseText) : xhr.responseText : NaN;\n        cb && !~arr.indexOf(undefined) && cb(arr);\n      }\n    };\n    xhr.open(obj.method || \"GET\", obj.url, true);\n    for (id in obj.headers) {\n      xhr.setRequestHeader(id, obj.headers[id]);\n    }\n    xhr.send(obj.body);\n  }\n};\n\nZ.xhrs = function (arr, callback, arrResolved, i) {\n  arrResolved = arr.map(function(){});\n  for (i in arr){\n    Z.xhr(arr[i], arrResolved, i, callback);\n  }\n};","import Z from \"../../index.js\";\n\nwindow.Z = Z;\n\nZ({\n  id: \"body\",\n  render: function () {\n    document.querySelector(this.id).innerHTML = this.data\n      .map((obj, i) => {\n        return `\n    \t<div>\n    \t\t<h1>${obj.collected.metadata.name}</h1>\n    \t\t${\n          obj.collected.metadata.author\n            ? `<h3>${obj.collected.metadata.author.name}</h3>`\n            : \"\"\n        }\n    \t\t<p>${obj.collected.metadata.description}</p>\n    \t</div>\n    \t`;\n      })\n      .join(\"\");\n  },\n});\n\nfunction queryLocalstoreById(id) {\n  var timestamp = localStorage.getItem(id + \"-timestamp\");\n  var oneMonthInMilliseconds = 1000 * 60 * 60 * 24 * 30;\n  if (!timestamp || Date.now() - timestamp > oneMonthInMilliseconds) {\n    localStorage.setItem(id + \"-timestamp\", Date.now());\n    return false;\n  }\n  return localStorage.getItem(id);\n}\n\nvar frameworks = [\"react\", \"angular\", \"zedjs\"];\nvar requests = [];\nframeworks.forEach((name) => {\n  requests.push({\n    url: \"https://api.npms.io/v2/package/\" + name,\n    local: function () {\n      console.log(\"ran local\");\n      return queryLocalstoreById(this.url);\n    },\n    callback: function (res) {\n      console.log(\"ran callback\");\n      localStorage.setItem(this.url, res);\n      return JSON.parse(res);\n    },\n  });\n});\n\nZ.xhrs(requests, function (res) {\n  Z.body.data = res;\n  Z.body.render();\n});\n\n// Z.xhr({\n//   url: \"https://api.npms.io/v2/package/zedjs\",\n//   callback: function (res) {\n//     Z.body.data = JSON.parse(res);\n//     Z.body.render();\n//   },\n// });\n"],"names":["Z","obj","id","xhr","arr","i","cb","ls","local","callback","indexOf","undefined","XMLHttpRequest","onreadystatechange","readyState","status","responseText","NaN","open","method","url","headers","setRequestHeader","send","body","xhrs","arrResolved","map","window","render","document","querySelector","this","innerHTML","data","collected","metadata","name","author","description","join","requests","forEach","push","console","log","timestamp","localStorage","getItem","Date","now","setItem","res","JSON","parse"],"mappings":"yBAAe,SAASA,EAAEC,GACxBD,EAAEC,EAAIC,IAAMD,EAGdD,EAAEG,IAAM,SAAUF,EAAKG,EAAKC,EAAGC,EAAIC,EAAIJ,EAAKD,MAC1CE,EAAMA,GAAO,GACbG,EAAKN,EAAIO,OAASP,EAAIO,QAEpBJ,EAAIC,GAAG,GAAKJ,EAAIQ,SAAWR,EAAIQ,SAASF,GAAMA,EAC9CD,KAAQF,EAAIM,aAAQC,IAAcL,EAAGF,OAClC,KASEF,KARLC,EAAM,IAAIS,gBACNC,mBAAqB,WACD,GAAlBV,EAAIW,aACNV,EAAIC,GAAK,GAAKF,EAAIY,SAAWd,EAAIc,QAAU,KAAOd,EAAIQ,SAAWR,EAAIQ,SAASN,EAAIa,cAAgBb,EAAIa,aAAeC,IACrHX,KAAQF,EAAIM,aAAQC,IAAcL,EAAGF,KAGzCD,EAAIe,KAAKjB,EAAIkB,QAAU,MAAOlB,EAAImB,KAAK,GAC5BnB,EAAIoB,QACblB,EAAImB,iBAAiBpB,EAAID,EAAIoB,QAAQnB,IAEvCC,EAAIoB,KAAKtB,EAAIuB,QAIjBxB,EAAEyB,KAAO,SAAUrB,EAAKK,EAAUiB,EAAarB,OAExCA,KADLqB,EAActB,EAAIuB,KAAI,eACZvB,EACRJ,EAAEG,IAAIC,EAAIC,GAAIqB,EAAarB,EAAGI,IC3BlCmB,OAAO5B,EAAIA,EAEXA,EAAE,CACAE,GAAI,OACJ2B,OAAQ,WACNC,SAASC,cAAcC,KAAK9B,IAAI+B,UAAYD,KAAKE,KAC9CP,KAAI,SAAC1B,EAAKI,8CAGLJ,EAAIkC,UAAUC,SAASC,+BAEzBpC,EAAIkC,UAAUC,SAASE,qBACZrC,EAAIkC,UAAUC,SAASE,OAAOD,cACrC,2BAEHpC,EAAIkC,UAAUC,SAASG,6CAI3BC,KAAK,OAcZ,IACIC,EAAW,GADE,CAAC,QAAS,UAAW,SAE3BC,SAAQ,SAACL,GAClBI,EAASE,KAAK,CACZvB,IAAK,kCAAoCiB,EACzC7B,MAAO,kBACLoC,QAAQC,IAAI,aAhBW3C,EAiBI8B,KAAKZ,MAhBhC0B,EAAYC,aAAaC,QAAQ9C,EAAK,gBAExB+C,KAAKC,MAAQJ,EADF,QAE3BC,aAAaI,QAAQjD,EAAK,aAAc+C,KAAKC,QACtC,GAEFH,aAAaC,QAAQ9C,GAP9B,IAA6BA,EACvB4C,GAkBFrC,SAAU,SAAU2C,UAClBR,QAAQC,IAAI,gBACZE,aAAaI,QAAQnB,KAAKZ,IAAKgC,GACxBC,KAAKC,MAAMF,SAKxBpD,EAAEyB,KAAKgB,GAAU,SAAUW,GACzBpD,EAAEwB,KAAKU,KAAOkB,EACdpD,EAAEwB,KAAKK"}